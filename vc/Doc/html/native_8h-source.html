<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>native.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3-rc2 -->
<h1>native.h</h1><div class="fragment"><pre>00001 <span class="comment">/*</span>
00002 <span class="comment">    Copyright 1997-2000 Walter R. Smith</span>
00003 <span class="comment"></span>
00004 <span class="comment">    HISTORY</span>
00005 <span class="comment">    04/09/97    wrs     Started</span>
00006 <span class="comment">*/</span>
00007 
00008 <span class="preprocessor">#ifndef __NATIVE_H__</span>
00009 <span class="preprocessor"></span><span class="preprocessor">#define __NATIVE_H__</span>
00010 <span class="preprocessor"></span>
00011 <span class="preprocessor">#include "<a class="code" href="objects_8h.html">objects.h</a>"</span>
00012 
00013 <span class="keyword">typedef</span> <a class="code" href="objects_8h.html#a5">Value</a> (*NativeFuncPtr)(<a class="code" href="objects_8h.html#a5">Value</a>, <a class="code" href="objects_8h.html#a5">Value</a>*, <span class="keywordtype">void</span>*);
00014 
00015 <span class="comment">// _x_ is for internal use only</span>
00016 <span class="preprocessor">#define DECLARE_NATIVE_FUNC(name)   Value name(Value rcvr, Value* _args_, void* _x_)</span>
00017 <span class="preprocessor"></span>
00018 <span class="preprocessor">#define NATIVE_FUNC(name)   Value name(Value _rcvr_, Value* _args_, void* _x_)</span>
00019 <span class="preprocessor"></span>
00020 <span class="preprocessor">#define ARGN(n) (_args_[(n)])</span>
00021 <span class="preprocessor"></span><span class="preprocessor">#define SELF    (_rcvr_)</span>
00022 <span class="preprocessor"></span>
00023 <span class="preprocessor">#define NATIVE_ARGS_1(arg1) \</span>
00024 <span class="preprocessor">    struct _argstruct_ { Value arg1; }; \</span>
00025 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00026 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_2(arg1, arg2) \</span>
00027 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; }; \</span>
00028 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00029 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_3(arg1, arg2, arg3) \</span>
00030 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; Value arg3; }; \</span>
00031 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00032 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_4(arg1, arg2, arg3, arg4) \</span>
00033 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; Value arg3; Value arg4; }; \</span>
00034 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00035 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_5(arg1, arg2, arg3, arg4, arg5) \</span>
00036 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; Value arg3; Value arg4; Value arg5; }; \</span>
00037 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00038 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_6(arg1, arg2, arg3, arg4, arg5, arg6) \</span>
00039 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; Value arg3; Value arg4; Value arg5; Value arg6; }; \</span>
00040 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00041 <span class="preprocessor"></span><span class="preprocessor">#define NATIVE_ARGS_7(arg1, arg2, arg3, arg4, arg5, arg6, arg7) \</span>
00042 <span class="preprocessor">    struct _argstruct_ { Value arg1; Value arg2; Value arg3; Value arg4; Value arg5; Value arg6; Value arg7; }; \</span>
00043 <span class="preprocessor">    _argstruct_* _pArgs_ = (_argstruct_*) _args_;</span>
00044 <span class="preprocessor"></span>
00045 <span class="preprocessor">#define ARG(name)   (_pArgs_-&gt;name)</span>
00046 <span class="preprocessor"></span>
00047 <span class="keyword">struct </span>GlobalFuncDecl {
00048     GlobalFuncDecl(<span class="keywordtype">char</span>* theName, NativeFuncPtr theFunc, <span class="keywordtype">int</span> theNumArgs)
00049         : name(theName), func(theFunc), numArgs(theNumArgs)
00050         { pNext = g_head; g_head = <span class="keyword">this</span>; }
00051 
00052     <span class="keywordtype">char</span>*           name;
00053     NativeFuncPtr   func;
00054     <span class="keywordtype">int</span>             numArgs;
00055     GlobalFuncDecl* pNext;
00056 
00057     <span class="keyword">static</span> GlobalFuncDecl* g_head;
00058 };
00059 
00060 <span class="preprocessor">#define DECLARE_GLOBAL_FUNCTION(name, func, nArgs) \</span>
00061 <span class="preprocessor">    GlobalFuncDecl gfd_##func(name, func, nArgs)</span>
00062 <span class="preprocessor"></span>
00063 <span class="preprocessor">#endif  // __NATIVE_H__</span>
</pre></div><hr><address style="align: right;"><small>Generated on Sun Feb 9 20:47:36 2003 for Prota by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.3-rc2 </small></address>
</body>
</html>
